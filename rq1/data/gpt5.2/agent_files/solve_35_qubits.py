import stim

stabilizers = [
    "XZZXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIXZZXIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIXZZXIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIXZZXIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIXZZXIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIXZZXIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXZZXI",
    "IXZZXIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIXZZXIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIXZZXIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIXZZXIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIXZZXIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIXZZXIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXZZX",
    "XIXZZIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIXIXZZIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIXIXZZIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIXIXZZIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIXIXZZIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIXIXZZIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIXZZ",
    "ZXIXZIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIZXIXZIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIZXIXZIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIZXIXZIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIZXIXZIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIZXIXZIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZXIXZ",
    "XXXXXXXXXXIIIIIIIIIIXXXXXXXXXXIIIII",
    "XXXXXIIIIIXXXXXIIIIIXXXXXIIIIIXXXXX",
    "IIIIIIIIIIIIIIIXXXXXXXXXXXXXXXXXXXX",
    "ZZZZZZZZZZIIIIIIIIIIZZZZZZZZZZIIIII",
    "ZZZZZIIIIIZZZZZIIIIIZZZZZIIIIIZZZZZ",
    "IIIIIIIIIIIIIIIZZZZZZZZZZZZZZZZZZZZ"
]

print(f"Number of stabilizers: {len(stabilizers)}")
print(f"Number of qubits: {len(stabilizers[0])}")

# Check for commutativity
def commute(s1, s2):
    t = 0
    for c1, c2 in zip(s1, s2):
        if c1 != 'I' and c2 != 'I' and c1 != c2:
            t += 1
    return t % 2 == 0

for i in range(len(stabilizers)):
    for j in range(i + 1, len(stabilizers)):
        if not commute(stabilizers[i], stabilizers[j]):
            print(f"Stabilizers {i} and {j} do not commute!")
            
try:
    paulis = [stim.PauliString(s) for s in stabilizers]
    tableau = stim.Tableau.from_stabilizers(paulis, allow_underconstrained=True)
    circuit = tableau.to_circuit("elimination")
    print("Circuit generated successfully.")
    with open("circuit_output.stim", "w") as f:
        f.write(str(circuit))
except Exception as e:
    print(f"Error generating circuit: {e}")
