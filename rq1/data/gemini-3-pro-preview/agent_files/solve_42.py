import stim

stabilizers = [
    "XXXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIXXXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIXXXXIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIXXXXIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIXXXXIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXXXXIII", 
    "XIXIXIXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIXIXIXIXIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIXIXIXIXIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIXIXIXIXIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIXIXIXIXIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIXIXIX", 
    "IIXXXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIXXXXIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIXXXXIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIXXXXIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXXXXIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXXXXI", 
    "ZZZZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIZZZZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIZZZZIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIZZZZIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIZZZZIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZZZIII", 
    "ZIZIZIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIZIZIZIZIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIZIZIZIZIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIZIZIZIZIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIZIZIZIZIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZIZIZIZ", 
    "IIZZZZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIZZZZIIIIIIIIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIZZZZIIIIIIIIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIZZZZIIIIIIIIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZZZIIIIIIII", 
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZZZI", 
    "IXXIXIIIXXIXIIIXXIXIIIXXIXIIIXXIXIIIXXIXII", 
    "IZZIZIIIZZIZIIIZZIZIIIZZIZIIIZZIZIIIZZIZII"
]

print(f"Num stabilizers: {len(stabilizers)}")
ps = [stim.PauliString(s) for s in stabilizers]

anticommuting = []
for i in range(len(ps)):
    for j in range(i + 1, len(ps)):
        if not ps[i].commutes(ps[j]):
            anticommuting.append((i, j))

if anticommuting:
    print(f"Found {len(anticommuting)} anticommuting pairs.")
    for i, j in anticommuting[:10]:
        print(f"  {i} vs {j}")
else:
    print("All stabilizers commute.")
    try:
        t = stim.Tableau.from_stabilizers(ps, allow_underconstrained=True)
        c = t.to_circuit()
        print("Generated circuit.")
        print(c)
    except Exception as e:
        print(f"Error generating circuit: {e}")
