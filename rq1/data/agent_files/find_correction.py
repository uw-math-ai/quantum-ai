import stim

raw_stabs = """
IIXIIXIIIIIIIIIIIIIIIIIXIIXII, IIIIIIIIIIXIIXIIIIIIIXIIIIIXIII, IIIIIIIIIIIIXIIXIIIIIIIXIIIIIIX, IXIIXIIIIIIIIIIIIIIIIIIIXIXIIII, IIIIIIXXIIIIIIXIXIIIIIIIIIIIIII, IIIIIIIIXXIIIIIIIIXIXIIIIIIIIII, IIIIIIIIIIIIIIIIIIIXIIXIIXIIXII, IIIXIIIIIIXXIXIIIIIIIIIIIIIIIII, IIIIXIIIIIIIIIIIIIIIIXIIIIXXIII, IIIIIXXIIIIIXIIXXIIIIIXIIIIIXXI, IIIIIIIIXIIIIIIIIIXIIIIXIIIIIIX, XIIXIIIXIIXIIIXIIIIIIXIIXIXIIII, XIIIIIXXIIIIIIIIIIIIIIIIIIIIIXI, IXIIIIIIXXIIIIXXXIIIIIIIXIIIIIX, IIXIIIIIIIIIIIIIIXIXIIIIIXIIIII, IIZIIZIIIIIIIIIIIIIIIIIIIZIIZII, IIIIIIIIIIZIIZIIIIIIIZIIIIIZIII, IIIIIIIIIIIIZIIZIIIIIIIZIIIIIIZ, IZIIZIIIIIIIIIIIIIIIIIIIZIZIIII, IIIIIIZZIIIIIIZIZIIIIIIIIIIIIII, IIIIIIIIZZIIIIIIIIZIZIIIIIIIIII, IIIIIIIIIIIIIIIIIIIZIIZIIZIIZII, IIIZIIIIIIZZIZIIIIIIIIIIIIIIIII, IIIIZIIIIIIIIIIIIIIIIZIIIIZZIII, IIIIIZZIIIIIZIIZZIIIIIZIIIIIZZI, IIIIIIIIZIIIIIIIIIZIIIIZIIIIIIZ, ZIIZIIIZIIZIIIZIIIIIIZIIZIZIIII, ZIIIIIZZIIIIIIIIIIIIIIIIIIIIIZI, IZIIIIIIZZIIIIZZZIIIIIIIZIIIIIZ, IIZIIIIIIIIIIIIIIZIZIIIIIZIIIII
"""
stabs = [stim.PauliString(s.strip()) for s in raw_stabs.replace('\n', '').split(',') if s.strip()]

# Candidate qubits for Z gate (where Stab 0 has X)
candidates = [2, 5, 25, 28]

for q in candidates:
    # Construct Z on qubit q
    op_str = ['I'] * 31
    op_str[q] = 'Z'
    op = stim.PauliString("".join(op_str))
    
    print(f"Checking Z_{q}...")
    bad = False
    for i, s in enumerate(stabs):
        if not s.commutes(op):
            if i == 0:
                print(f"  Anti-commutes with target Stab 0 (GOOD)")
            else:
                print(f"  Anti-commutes with Stab {i} (BAD)")
                bad = True
    
    if not bad:
        print(f"SUCCESS! Z_{q} is the correction operator.")
