import stim
import sys

# The stabilizers from the prompt
stabilizers_str = [
    "XZZXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIXZZXIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIXZZXIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIXZZXIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIXZZXIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIXZZXIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXZZXI",
    "IXZZXIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIXZZXIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIXZZXIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIXZZXIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIXZZXIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIXZZXIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXZZX",
    "XIXZZIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIXIXZZIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIXIXZZIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIXIXZZIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIXIXZZIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIXIXZZIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIXZZ",
    "ZXIXZIIIIIIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIZXIXZIIIIIIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIZXIXZIIIIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIZXIXZIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIZXIXZIIIIIIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIZXIXZIIIII",
    "IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZXIXZ",
    "XXXXXXXXXXXXXXXXXXXXIIIIIIIIIIIIIII",
    "XXXXXIIIIIXXXXXIIIIIXXXXXIIIIIXXXXX",
    "IIIIIIIIIIXXXXXXXXXXXXXXXXXXXXIIIII",
    "ZZZZZZZZZZZZZZZZZZZZIIIIIIIIIIIIIII",
    "ZZZZZIIIIIZZZZZIIIIIZZZZZIIIIIZZZZZ",
    "IIIIIIIIIIZZZZZZZZZZZZZZZZZZZZIIIII"
]

try:
    # Convert strings to Stim PauliStrings
    pauli_stabilizers = [stim.PauliString(s) for s in stabilizers_str]
    
    # Attempt to create a tableau from the stabilizers
    # allow_underconstrained=True is important because we might have fewer stabilizers than qubits
    tableau = stim.Tableau.from_stabilizers(
        pauli_stabilizers, 
        allow_underconstrained=True,
        allow_redundant=True
    )
    
    # Convert the tableau to a circuit
    # This circuit maps the |0...0> state to the stabilizer state
    circuit = tableau.to_circuit()
    
    print("CIRCUIT_START")
    print(circuit)
    print("CIRCUIT_END")
    
except Exception as e:
    print(f"Error: {e}", file=sys.stderr)
