import stim
import sys

stabilizers = [
    "IXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIIIIIIIIIIIIIII",
    "IIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIIIIIIIIIIIIII",
    "IIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIIIIIIIIIIIII",
    "IIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIIIIIIIIIIIIIII",
    "XIIIIXIIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIIIIIIIIIIIIII",
    "XXIIIIIIIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIIIIIIIIIIIII",
    "IIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIIIIIIIII",
    "IIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIIIIIIII",
    "IIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIIIIIIIII",
    "IIIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIIIIIIIII",
    "IIIIIIXIIIIXIIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIIIIIIIII",
    "IIIIIIXXIIIIIIIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIIIIIII",
    "IIIIIIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIIII",
    "IIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIIII",
    "IIIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIIIIIII",
    "IIIIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIIII",
    "IIIIIIIIIIIIXIIIIXIIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIIII",
    "IIIIIIIIIIIIXXIIIIIIIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXIIIIII",
    "XIIIIIIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIIII",
    "IXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIIII",
    "IIXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIIXIIIIIXIII",
    "IIIXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXII",
    "IIIIXIIIIIIIIIIIIIXIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIIIIIIIIXIIIIIXI",
    "IIIIIXIIIIIIIIIIIIXXIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIXIIIIIIIIXIIIIIX",
    "IIIIIIXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIXIIXIIIII",
    "IIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIXIIXIIII",
    "IIIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIXIIXIII",
    "IIIIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIIIIIIIXII",
    "IIIIIIIIIIXIIIIIIIIIIIIIXIIIIXIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIIIIIIIXI",
    "IIIIIIIIIIIXIIIIIIIIIIIIXXIIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIIIXIIIIIIIIX",
    "IIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIXIIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIXII",
    "IIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIXIIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIXI",
    "IIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIXIIIIIXIIIIIIIIIIIIIIIIIIIIIIIIIIX",
    "IIIIIIIIIIIIIIIXIIIIIIIIIIIIIIIIIIXXIIIXIIIIIXIIIIIIIIIIIIIIIIIIIIXIIIII",
    "IIIIIIIIIIIIIIIIXIIIIIIIIIIIIIXIIIIXIIIIXIIIIIXIIIIIIIIIIIIIIIIIIIIXIIII",
    "IIIIIIIIIIIIIIIIIXIIIIIIIIIIIIXXIIIIIIIIIXIIIIIXIIIIIIIIIIIIIIIIIIIIXIII",
    "IIIZIIIIIIIIIIIIIIIIIIIIZIIIIIZIIIIIIIIIZZIIIIIIIIIIIIZIIIIIIIIIIIIIIIII",
    "IIIIZIIIIIIIIIIIIIIIIIIIIZIIIIIZIIIIZIIIIZIIIIIIIIIIIIIZIIIIIIIIIIIIIIII",
    "IIIIIZIIIIIIIIIIIIIIIIIIIIZIIIIIZIIIZZIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIII",
    "ZIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIIZIIIZZIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIII",
    "IZIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIIZIIIZZIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIII",
    "IIZIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIIZIIIZZIIIIIIIIIIIIIIIIIIZIIIIIIIIIIII",
    "ZIIIIIIIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIIIIIIZIIIIIIIIIII",
    "IZIIIIIIIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIZIIIIZIIIIIIIIIIIIIZIIIIIIIIII",
    "IIZIIIIIIIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZIIIIIIIII",
    "IIIZIIZIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZIIIIIIII",
    "IIIIZIIZIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZIIIIIII",
    "IIIIIZIIZIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZIIIIII",
    "ZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZIIIIIIIIIIIIZIIIII",
    "IZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZIIIIZIIIIIIIIIIIIIZIIII",
    "IIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZIII",
    "IIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZII",
    "IIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZI",
    "IIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIIIIIIZ",
    "IIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIIIIIIIZZIIIIIIIIIIII",
    "IIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIIZIIIIZIIIIIIIIIIII",
    "IIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIIII",
    "IIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIII",
    "IIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIIIIIIII",
    "IIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIIIIIIIII",
    "IIIIIIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIIIIIIIZZIIIIII",
    "IIIIIIIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIIZIIIIZIIIIII",
    "IIIIIIIIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIIII",
    "IIIIIIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIIII",
    "IIIIIIIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIIII",
    "IIIIIIIIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIIIIII",
    "IIIIIIIIIIIIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIIIIIIIZZ",
    "IIIIIIIIIIIIIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIIZIIIIZ",
    "IIIIIIIIIIIIIIIIIIIIZIIIIIZIIIIIIIIZIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIIII",
    "IIIIIIIIIIIIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZIII",
    "IIIIIIIIIIIIIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZII",
    "IIIIIIIIIIIIIIIIIIIIIIIZIIIIIZIIZIIIIIIIIIIIIIIIIIIIIZIIIIIIIIIIIIIIIZZI"
]

print(f"Number of stabilizers: {len(stabilizers)}")
print(f"Number of qubits: {len(stabilizers[0])}")

try:
    tableau = stim.Tableau.from_stabilizers([stim.PauliString(s) for s in stabilizers], allow_redundant=True, allow_underconstrained=True)
    # The tableau's Z outputs map to the stabilizers.
    # So if we apply the tableau operation to the |0> state, we get the state stabilized by the stabilizers.
    circuit = tableau.to_circuit()
    
    # Verification
    sim = stim.TableauSimulator()
    sim.do(circuit)
    
    all_good = True
    for s in stabilizers:
        if sim.peek_observable_expectation(stim.PauliString(s)) != 1:
            all_good = False
            print(f"Failed stabilizer: {s}")
            break
            
    if all_good:
        print("Verification successful!")
        with open(r"C:\Users\anpaz\Repos\quantum-ai\rq1\circuit_solution.stim", "w") as f:
            f.write(str(circuit))
    else:
        print("Verification failed.")

except Exception as e:
    print(f"Error: {e}")
